# 图片字幕生成器 - 需求文档 (PRD)

## 1. 项目简介
本项目旨在开发一个网页版的“图片字幕生成器”工具。用户可以上传一张图片，并输入多行字幕文本，系统将自动生成一张具有“电影长截图”风格的拼接图片。该工具的核心特征是保留原图主体，并根据字幕行数，重复使用原图底部区域作为背景，垂直拼接出多行字幕效果，呈现出一种视觉上的“切割感”。

## 2. 核心功能模块

### 2.1 界面布局
*   **整体风格**：简洁、现代的 Web UI，采用卡片式设计。
*   **结构**：左右分栏布局。
    *   **左侧**：操作配置面板（上传、设置、输入）。
    *   **右侧**：实时预览面板。

### 2.2 功能详情

#### 2.2.1 图片上传
*   **功能**：允许用户从本地选择一张图片上传。
*   **UI 元素**：
    *   “选择图片”按钮（蓝色，带图标）。
    *   文件名展示区：上传成功后显示文件名（如 `image.jpg`）。
*   **交互**：点击按钮触发文件选择器；支持拖拽上传（可选）。

#### 2.2.2 字幕参数设置
提供一组控件供用户调整字幕样式和拼接效果：
*   **字幕高度 (px)**：
    *   定义每一行字幕背景条的高度。
    *   这也决定了从原图底部截取多高区域作为重复背景。
*   **字体大小 (px)**：控制字幕文字的显示大小。
*   **字体颜色**：设置文字颜色，支持 HEX 值或颜色选择器（默认白色）。
*   **轮廓颜色**：设置文字描边颜色（默认黑色），增加文字在复杂背景上的可读性。
*   **字体样式**：下拉选择字体（如“微软雅黑”、“宋体”等）。
*   **字体粗细**：下拉选择粗细（如“正常”、“加粗”）。

#### 2.2.3 字幕内容编辑
*   **输入框**：一个多行文本域 (Textarea)。
*   **逻辑**：
    *   用户按回车键换行。
    *   每一行文本对应生成图片中的一条字幕。
    *   支持空行（虽然不建议，但技术上应支持）。

#### 2.2.4 图像处理与预览（核心算法）
*   **预览区**：实时（或点击生成后）显示合成效果。
*   **拼接逻辑（切割感实现）**：
    1.  **底图**：保留用户上传的完整原始图片。
    2.  **切片获取**：根据用户设置的“字幕高度 (H)”，截取原图最底部高度为 H 的区域作为“标准背景条”。
    3.  **拼接规则**：
        *   **第 1 行字幕**：直接叠加在原图画面的底部（居中显示）。
        *   **第 2 到 N 行字幕**：每多一行字幕，就在原图下方拼接一个“标准背景条”。
        *   后续的每一行字幕分别叠加在对应的拼接背景条上。
    *   **最终效果**：一张长图，由 [原图] + [背景条] + [背景条] ... 组成。视觉上看起来像是连续的电影截图拼接。
    *   *注*：另一种常见实现是原图不含字幕，下方拼接 N 个含字幕的条。但根据用户提供的参考图（第一行字幕在原图画面内，后续字幕在重复背景上），建议采用上述“原图含首行 + 后续重复拼接”的逻辑，或者“原图 + N行切片”的逻辑。**根据“切割感”和参考图分析，最准确的逻辑应该是：**
        *   **最终图片 = 原图（含第一行字幕） + (N-1) 个原图底部切片（分别含后续字幕）。**
        *   或者：**最终图片 = 原图 + N 个原图底部切片（分别含字幕）。**
        *   *决策*：参考图中，第一行字幕“这是Manus的相关照片”背景看起来就是原图的一部分。为了实现最佳的“电影台词拼接”效果，通常采用：**保留一张完整图（包含第一句台词），后续台词通过拼接底部切片实现。**

#### 2.2.5 操作与导出
*   **生成字幕图片**：点击按钮，触发最终的高清图片生成渲染。
*   **保存图片**：点击按钮，将生成的合成图片下载到本地。
*   **状态反馈**：操作成功后显示绿色 Toast 提示“字幕图片生成成功!”。

## 3. 技术栈建议
*   **前端框架**：React 或 Vue。
*   **样式库**：Tailwind CSS 或 Ant Design / Material UI。
*   **图像处理**：HTML5 Canvas API (用于在浏览器端直接进行图片裁剪、拼接和文字绘制，无需上传到服务器处理，保护隐私且速度快)。

## 4. UI 细节参考（基于图片）
*   **背景色**：页面背景为浅灰色 (#f5f5f5)。
*   **卡片**：白色背景，圆角，轻微阴影。
*   **水印**：参考图中有多处“访客”水印，这是截图来源系统的特征，本项目不需要实现水印功能，除非另有说明。
